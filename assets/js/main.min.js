"use strict";function get_siblings(t){var n=[];if(t.parentNode){let e=t.parentNode.firstChild;for(;e;)1===e.nodeType&&e!==t&&n.push(e),e=e.nextSibling}return n}function slideDown(e){e.style.maxHeight=e.scrollHeight+"px"}function slideToggle(e){0===e.offsetHeight?e.style.maxHeight=e.scrollHeight+"px":e.style.maxHeight=0}function accordion(){document.querySelectorAll(".js-accordion").forEach(e=>{const t=e.querySelectorAll("button"),n=()=>{for(var e of t)e.classList.remove("active"),e.parentNode.classList.remove("active"),e.nextElementSibling.style.maxHeight=0};t.forEach(e=>{e.addEventListener("click",function(){this.classList.contains("active")?n():(n(),this.classList.add("active"),this.parentNode.classList.add("active"),slideToggle(this.nextElementSibling))})})})}function setHeaderScrollClass(){const e=document.querySelector(".header");window.addEventListener("scroll",function(){window.scrollY>=e.offsetHeight?e.classList.add("scroll"):e.classList.remove("scroll")})}function setTelMask(){[].forEach.call(document.querySelectorAll('[type="tel"]'),function(e){let a;function t(e){e.keyCode&&(a=e.keyCode),this.selectionStart<3&&e.preventDefault();let t="+7 (___) ___-__-__",n=0,i=t.replace(/\D/g,""),o=this.value.replace(/\D/g,""),r=t.replace(/[_\d]/g,function(e){return n<o.length?o.charAt(n++)||i.charAt(n):e});-1!=(n=r.indexOf("_"))&&(n<5&&(n=3),r=r.slice(0,n));var s=t.substr(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");(!(s=new RegExp("^"+s+"$")).test(this.value)||this.value.length<5||47<a&&a<58)&&(this.value=r),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",t,!1),e.addEventListener("focus",t,!1),e.addEventListener("blur",t,!1),e.addEventListener("keydown",t,!1)})}function sendForm(){document.querySelectorAll("form[name]").forEach(function(e){e.addEventListener("submit",function(e){e.preventDefault();const t=this;t.classList.add("loader");let n=new FormData(t);var e=t.name,i=t.querySelector("input[type=file]");n.append("action","send_mail"),e&&(n.append("form_name",e),i&&Array.from(i.files).forEach((e,t)=>{n.append(t.toString(),e)}),fetch(adem_ajax.url,{method:"POST",body:n}).then(e=>e.text()).then(e=>{t.classList.remove("loader"),Fancybox.close(!0),t.reset(),setTimeout(function(){Fancybox.show([{src:"#success",type:"inline"}])},100)}).catch(e=>{console.error("Error:",e)}))})})}function setFileName(){var e=document.querySelectorAll("input[type=file]");e&&e.forEach(function(e){e.addEventListener("change",function(e){e.target.nextElementSibling.textContent=e.target.files[0].name})})}function tabs(){var e=document.querySelectorAll(".js-tabs");e&&e.forEach(function(e){var n;(n=e).addEventListener("click",function(e){var t=e.target.closest("li");t.classList.contains("active")&&t.parentNode.classList.toggle("open"),t.classList.contains("active")||e.target===n||(e=t,t=document.querySelector("#"+e.getAttribute("data-tab")),e.classList.add("active"),get_siblings(e).forEach(function(e){e.classList.remove("active")}),t.classList.add("active"),get_siblings(t).forEach(function(e){e.classList.remove("active")}),e.parentNode.classList.remove("open"))})})}function showMorePosts(){var e=document.querySelector(".js-show-more");e&&e.addEventListener("click",function(e){e.stopImmediatePropagation();const t=document.querySelector(".js-show-more-container");this.textContent="Загрузка...";fetch(adem_ajax.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({action:"load_more",query:posts,page:current_page})}).then(e=>e.text()).then(e=>{this.innerHTML=this.dataset.text,t.insertAdjacentHTML("beforeend",e),++current_page===max_pages&&this.remove()}).catch(e=>{console.error("Error:",e)})})}document.addEventListener("DOMContentLoaded",function(){accordion(),setHeaderScrollClass(),setFileName(),sendForm(),setTelMask(),showMorePosts(),tabs()});try{Fancybox.bind("[data-fancybox]",{animated:!1})}catch(e){console.error("Error: "+e)}const reviewsCarousel=document.querySelector(".reviews__slider");if(reviewsCarousel){let e=new Swiper(reviewsCarousel,{slidesPerView:1,spaceBetween:25,centeredSlides:!0,autoHeight:!0,navigation:{nextEl:reviewsCarousel.parentNode.querySelector(".reviews__next"),prevEl:reviewsCarousel.parentNode.querySelector(".reviews__prev")},pagination:{el:".reviews__pagination"},breakpoints:{1440:{spaceBetween:140},769:{spaceBetween:80}}})}const peculiaritiesCarousel=document.querySelector(".peculiarities__container");if(peculiaritiesCarousel&&window.innerWidth<992){let e=new Swiper(peculiaritiesCarousel,{slidesPerView:"auto",spaceBetween:30})}const quizForm=document.querySelector(".quiz__form");if(quizForm){let o=new Swiper(quizForm,{allowTouchMove:!1,slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},navigation:{nextEl:".quiz__next",prevEl:".quiz__prev"},pagination:{el:".quiz__pagination",bulletClass:"quiz__pagination-bullet",bulletActiveClass:"active"},on:{init:function(){var e=quizForm.querySelector(".js-quiz-submit-trigger");const n=quizForm.querySelector(".js-quiz-submit"),i=quizForm.querySelector(".js-quiz-input");e.addEventListener("click",function(){let t="";quizForm.querySelectorAll("input:not(:disabled):not([name=policy]):checked").forEach(e=>{t+=e.name+" - "+e.value+"<br/>"}),i.value=t,n.click(),quizForm.checkValidity()&&o.slideTo(0)})}}})}document.addEventListener("DOMContentLoaded",function(e){const t=document.querySelector(".header");if(t&&window.innerWidth<=768){const i=t.querySelector(".header__burger"),o=t.querySelector(".header__drop");var n=t.querySelectorAll('a[href*="#"]');const r=()=>{t.classList.remove("active"),i.classList.remove("active"),o.style.maxHeight=0,document.body.style.overflow="visible"};n.forEach(t=>{t.addEventListener("click",function(e){e.preventDefault();e=t.getAttribute("href").substring(1);document.getElementById(e).scrollIntoView({behavior:"smooth",block:"center"}),window.innerWidth<=768&&r()})}),i.addEventListener("click",function(){this.classList.contains("active")?r():(t.classList.add("active"),i.classList.add("active"),o.style.maxHeight=o.scrollHeight+"px",document.body.style.overflow="hidden")})}});